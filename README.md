# LlamaIndex-Study
LlamaIndex study note.

# 1_LlamaIndexå…¥é—¨
LlamaIndexæ˜¯ä¸€ä¸ªåº”ç”¨äºLLMåº”ç”¨ç¨‹åºçš„æ•°æ®æ¡†æ¶ï¼Œæ—¨åœ¨å¸®åŠ©å¼€å‘è€…é€šè¿‡å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰æ¥æ‘„å–ã€æ„å»ºå’Œè®¿é—®ç§æœ‰æˆ–ç‰¹å®šé¢†åŸŸçš„æ•°æ®ã€‚å®ƒå…è®¸ç”¨æˆ·å°†å¤–éƒ¨æ•°æ®æºä¸LLMç›¸ç»“åˆï¼Œä»¥ä¾¿åœ¨å¤„ç†æ–‡æœ¬æ•°æ®æ—¶è·å¾—æ›´å¥½çš„æ€§èƒ½å’Œæ•ˆç‡ã€‚

è¯¥æ¡†æ¶çš„æ ¸å¿ƒç»„ä»¶åŒ…æ‹¬æ•°æ®è¿æ¥å™¨ï¼ˆData Connectorsï¼‰ã€æ•°æ®ç´¢å¼•ï¼ˆData Indexsï¼‰ã€æ•°æ®ä»£ç†ï¼ˆData Agentsï¼‰ã€å¼•æ“ï¼ˆEnginesï¼‰ã€åº”ç”¨ç¨‹åºé›†æˆï¼ˆApplication Integrationsï¼‰ã€‚

LlamaIndexæ”¯æŒå¤šç§ç´¢å¼•ç±»å‹ï¼ŒåŒ…æ‹¬å‘é‡ç´¢å¼•ã€åˆ—è¡¨ç´¢å¼•å’Œæ ‘å½¢ç´¢å¼•ç­‰ï¼Œæ¯ç§ç´¢å¼•éƒ½é’ˆå¯¹ç‰¹å®šçš„æ•°æ®ç±»å‹å’ŒæŸ¥è¯¢éœ€æ±‚è¿›è¡Œäº†ä¼˜åŒ–ã€‚æ­¤å¤–ï¼Œå®ƒè¿˜æä¾›äº†å¼ºå¤§çš„æŸ¥è¯¢æ¥å£ï¼Œä½¿å¾—ç”¨æˆ·èƒ½å¤Ÿé€šè¿‡è‡ªç„¶è¯­è¨€ä¸æ•°æ®äº¤äº’ã€‚è¿™æ„å‘³ç€ç”¨æˆ·ä¸ä»…å¯ä»¥æŸ¥è¯¢ç´¢å¼•ï¼Œè¿˜å¯ä»¥è‡ªå®šä¹‰æç¤ºç»„åˆæ–¹å¼ï¼Œä»¥å®ç°æ›´ç²¾ç¡®å’Œä¸ªæ€§åŒ–çš„æ•°æ®æ£€ç´¢ã€‚

é™¤äº†ä½œä¸ºæ•°æ®å¤„ç†å·¥å…·ä¹‹å¤–ï¼ŒLlamaIndexè¿˜æä¾›äº†ç±»ä¼¼äºLangChainçš„åŠŸèƒ½ï¼Œä½†æ›´åŠ ä¸“æ³¨äºæ•°æ®å¤„ç†ã€‚å®ƒå¯ä»¥å¸®åŠ©å¼€å‘è€…æ„å»ºè¯¸å¦‚æ–‡æ¡£é—®ç­”ç³»ç»Ÿè¿™æ ·çš„åº”ç”¨ï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿæ ¹æ®é—®é¢˜è‡ªåŠ¨æŸ¥æ‰¾ç›¸å…³æ–‡æ¡£å¹¶ç”Ÿæˆç­”æ¡ˆï¼Œè¿™åœ¨çŸ¥è¯†ç®¡ç†ã€åœ¨çº¿å®¢æœå’Œè‡ªåŠ¨åŒ–é—®ç­”ç­‰é¢†åŸŸå…·æœ‰å¹¿æ³›åº”ç”¨ã€‚

LlamaIndexä¸ºå¼€å‘è€…æä¾›äº†ä¸€ä¸ªå¼ºå¤§è€Œçµæ´»çš„å·¥å…·é›†ï¼Œä½¿ä»–ä»¬èƒ½å¤Ÿåˆ©ç”¨å¤§å‹è¯­è¨€æ¨¡å‹çš„å¼ºå¤§åŠŸèƒ½æ¥æ„å»ºå’Œå¤„ç†å„ç§è‡ªç„¶è¯­è¨€å¤„ç†åº”ç”¨ç¨‹åºã€‚

## v0.10æœ€å¤§çš„å˜åŒ–ï¼ˆv0.10ç‰ˆæœ¬å¤§æ¦‚200ä¸‡è¡Œä»£ç ï¼‰
* åˆ›å»ºäº†"llama-index-core"åŒ…ï¼Œæ­¤æ–‡ä»¶å¤¹åŒ…å«æ‰€æœ‰æ ¸å¿ƒ LlamaIndex æŠ½è±¡
* å°†æ‰€æœ‰é›†æˆ(integrations)å’Œæ¨¡æ¿(templates)æ‹†åˆ†ä¸ºå•ç‹¬çš„åŒ…ï¼Œæ›´åŠ è§£è€¦ã€å¹²å‡€ä¸”ä¸æ˜“æŸå
* å¼ƒç”¨ServiceContextï¼Œå®ƒç¬¨é‡ä¸”ä¸é€æ˜ï¼Œä¸çŸ¥é“é»˜è®¤å‚æ•°æ˜¯ä»€ä¹ˆ
* å…¶ä»–åˆ†ç¦»çš„åŒ…ï¼š
  - llama-index-coreï¼ˆæ­¤æ–‡ä»¶å¤¹åŒ…å«æ‰€æœ‰æ ¸å¿ƒ LlamaIndex æŠ½è±¡ï¼‰
  - llama-index-integrationsï¼ˆæ­¤æ–‡ä»¶å¤¹åŒ…å« 19 ä¸ª LlamaIndex æŠ½è±¡çš„ç¬¬ä¸‰æ–¹é›†æˆã€‚è¿™åŒ…æ‹¬æ•°æ®åŠ è½½å™¨ã€LLMã€åµŒå…¥æ¨¡å‹ã€å‘é‡å­˜å‚¨ç­‰ï¼‰
  - llama-index-finetuningï¼ˆåŒ…å« LlamaIndex å¾®è°ƒæŠ½è±¡ã€‚è¿™äº›ä»ç„¶æ˜¯ç›¸å¯¹å®éªŒæ€§çš„ï¼‰
  - llama-index-experimentalï¼ˆåŒ…å«å®éªŒæ€§åŠŸèƒ½ã€‚ç›®å‰åŸºæœ¬ä¸Šæœªä½¿ç”¨ï¼ˆå¤–éƒ¨å‚æ•°è°ƒæ•´ï¼‰ï¼‰
  - llama-index-cliï¼ˆLlamaIndexå·¥å…·ï¼‰
  - llama-index-legacyï¼ˆåŒ…å«æ—§ç‰ˆ LlamaIndex ä»£ç ï¼Œä»¥é˜²ç”¨é”™ï¼‰
  - llama-index-packsï¼ˆæ­¤æ–‡ä»¶å¤¹åŒ…å«æˆ‘ä»¬çš„ 50 å¤šä¸ª LlamaPackï¼Œè¿™äº›æ¨¡æ¿æ—¨åœ¨å¯åŠ¨ç”¨æˆ·çš„åº”ç”¨ç¨‹åºï¼‰

## æ–‡ä»¶å¤¹ç»“æ„
LlamaIndexçš„æ–‡ä»¶å¤¹ç»“æ„æ¯”è¾ƒç‹¬ç‰¹ï¼Œåœ¨å¯¼å…¥æ—¶ä¿ç•™äº†LlamaIndexçš„namespaceã€‚
integrationså’Œä¸­çš„å­ç›®å½•packsä»£è¡¨å„ä¸ªåŒ…ã€‚æ–‡ä»¶å¤¹çš„åç§°ä¸åŒ…åç§°ç›¸å¯¹åº”ã€‚ä¾‹å¦‚llama-index-integrations/llms/llama-index-llms-geminiå¯¹åº”llama-index-llms-geminiPyPIåŒ…ã€‚
åœ¨æ¯ä¸ªåŒ…æ–‡ä»¶å¤¹ä¸­ï¼Œæºæ–‡ä»¶æ’åˆ—åœ¨æ‚¨ç”¨äºå¯¼å…¥å®ƒä»¬çš„ç›¸åŒè·¯å¾„ä¸­ã€‚ä¾‹å¦‚ï¼Œåœ¨ Gemini LLM åŒ…ä¸­ï¼Œæ‚¨å°†çœ‹åˆ°ä¸€ä¸ªåä¸º çš„æ–‡ä»¶å¤¹ï¼Œå…¶ä¸­llama_index/llms/geminiåŒ…å«æºæ–‡ä»¶ã€‚æ­¤æ–‡ä»¶å¤¹ç»“æ„å…è®¸æ‚¨åœ¨å¯¼å…¥æœŸé—´ä¿ç•™é¡¶çº§llama_indexå‘½åç©ºé—´ã€‚å¯¹äº Gemini LLMï¼Œæ‚¨å¯ä»¥ pip å®‰è£…llama-index-llms-geminiï¼Œç„¶åä½¿ç”¨from llama_index.llms.gemini import Gemini
è¿™äº›å­æ–‡ä»¶å¤¹ä¸­çš„æ¯ä¸€ä¸ªè¿˜å…·æœ‰æ‰“åŒ…æ‰€éœ€çš„èµ„æºï¼špyproject.tomlã€poetry.lockå’Œ a Makefileï¼Œä»¥åŠè‡ªåŠ¨åˆ›å»ºåŒ…çš„è„šæœ¬ã€‚

## é›†æˆ
æ‰€æœ‰ç¬¬ä¸‰æ–¹é›†æˆç°åœ¨éƒ½åœ¨llama-index-integrations.è¿™é‡Œæœ‰ 19 ä¸ªæ–‡ä»¶å¤¹ã€‚ä¸»è¦é›†æˆç±»åˆ«æœ‰ï¼š
* llms
* embeddings
* multi_modal_llms
* readers
* tools
* vector_stores
ä¸ºäº†å®Œæ•´èµ·è§ï¼Œè¿™é‡Œåˆ—å‡ºäº†æ‰€æœ‰å…¶ä»–ç±»åˆ«ï¼šagent, callbacks, evaluation, extractors, graph_stores, indices, output_parsers, postprocessor, program, question_gen, response_synthesizers, retrievers, storage, toolsã€‚

## LlamaIndexç”Ÿæ€ç³»ç»Ÿï¼ˆecosystemï¼‰
* 150+ data loaders
* 35+ agent tools
* 50+ LlamaPack templates
* 50+ LLMs
* 25+ embeddings
* 40+ vector stores

ä½†æ˜¯ï¼Œä¹Ÿæœ‰ä¸€äº›ç—›ç‚¹ï¼Œæ¯”å¦‚æ‰€æœ‰çš„é›†æˆéƒ½ç¼ºä¹æ­£ç¡®çš„æµ‹è¯•ï¼Œè¿™äº›é›†æˆéƒ½è¢«çº³å…¥äº†ä¸»åŒ…ï¼Œä¾èµ–é¡¹ä¸­çš„ä»»ä½•æ›´æ–°ï¼Œæ‚¨éƒ½å¿…é¡»æ›´æ–°ç‰ˆæœ¬

## äº”å¤§æ ¸å¿ƒç»„ä»¶
åŒ…æ‹¬æ•°æ®è¿æ¥å™¨ï¼ˆData Connectorsï¼‰ã€æ•°æ®ç´¢å¼•ï¼ˆData Indexsï¼‰ã€æ•°æ®ä»£ç†ï¼ˆData Agentsï¼‰ã€å¼•æ“ï¼ˆEnginesï¼‰ã€åº”ç”¨ç¨‹åºé›†æˆï¼ˆApplication Integrationsï¼‰
* Data Connectors: è´Ÿè´£ä»å¤šç§åŸç”Ÿæ•°æ®æºä¸­è¯»å–æ•°æ®ï¼Œå¦‚APIã€PDFæ–‡ä»¶ã€SQLæ•°æ®åº“ç­‰æ³¨å…¥LlamaIndex
* Data Indexs: å°†åŸç”Ÿæ•°æ®è½¬æ¢ä¸ºä¸åŒçš„ç´¢å¼•ç±»å‹ï¼ˆSummaryã€Vector Storeã€Treeç­‰ï¼‰ï¼Œè¿™ç§ç´¢å¼•ç±»å‹æ—¢ä¾¿äºLLMså¤„ç†ï¼Œåˆèƒ½ä¿æŒé«˜æ•ˆçš„æ€§èƒ½
* Data Agents: 
* Engines: ä¸€ç§æ˜¯Queryå¼•æ“ã€ä¸€ç§æ˜¯Chatå¼•æ“
* Application Integrations: å¯¹æ¥ç”Ÿæ€ä¸­çš„æ¡†æ¶ã€åº”ç”¨ã€æ¥å£ç­‰ï¼Œæ¯”å¦‚Langchainã€ChatGPT

## Usage Example
```
import os

os.environ["REPLICATE_API_TOKEN"] = "YOUR_REPLICATE_API_TOKEN"

from llama_index.core import Settings, VectorStoreIndex, SimpleDirectoryReader
from llama_index.embeddings.huggingface import HuggingFaceEmbedding
from llama_index.llms.replicate import Replicate
from transformers import AutoTokenizer

# set the LLM
llama2_7b_chat = "meta/llama-2-7b-chat:8e6975e5ed6174911a6ff3d60540dfd4844201974602551e10e9e87ab143d81e"
Settings.llm = Replicate(
    model=llama2_7b_chat,
    temperature=0.01,
    additional_kwargs={"top_p": 1, "max_new_tokens": 300},
)

# set tokenizer to match LLM
Settings.tokenizer = AutoTokenizer.from_pretrained(
    "NousResearch/Llama-2-7b-chat-hf"
)

# set the embed model
Settings.embed_model = HuggingFaceEmbedding(
    model_name="BAAI/bge-small-en-v1.5"
)

documents = SimpleDirectoryReader("YOUR_DATA_DIRECTORY").load_data()
index = VectorStoreIndex.from_documents(
    documents,
)

query_engine = index.as_query_engine()
query_engine.query("YOUR_QUESTION")
```
# 2_LlamaIndexé«˜çº§
## æ£€ç´¢å¢å¼ºç”Ÿæˆ (RAG) 
![image](https://github.com/txjlrk/LlamaIndex-Study/assets/8086669/6bb120da-e052-4297-b1ca-b690ff2fb644)
RAG çš„ä¸»è¦ç”¨é€”æ˜¯ä¸ºäº†ç»™ç”Ÿæˆå¼ AI è¾“å‡ºçš„æ–‡æœ¬æä¾›æ”¯æ’‘ã€‚
æ¢è¨€ä¹‹ï¼ŒRAG å°±æ˜¯é€šè¿‡äº‹å®ã€è‡ªå®šä¹‰æ•°æ®ä»¥å‡å°‘ LLM å¹»è§‰ã€‚å…·ä½“è€Œè¨€ï¼Œåœ¨ RAG ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¯é ã€å¯ä¿¡çš„è‡ªå®šä¹‰æ•°æ®æ–‡æœ¬ï¼Œå¦‚äº§å“æ–‡æ¡£ï¼Œéšåä»å‘é‡æ•°æ®åº“ä¸­æ£€ç´¢ç›¸ä¼¼ç»“æœã€‚ç„¶åï¼Œå°†å‡†ç¡®çš„æ–‡æœ¬ç­”æ¡ˆä½œä¸ºâ€œä¸Šä¸‹æ–‡â€å’Œâ€œé—®é¢˜â€ä¸€èµ·æ’å…¥åˆ°â€œPromptâ€ä¸­ï¼Œå¹¶å°†å…¶è¾“å…¥åˆ°è¯¸å¦‚ OpenAI çš„ ChatGPT ä¹‹ç±»çš„ LLM ä¸­ã€‚æœ€ç»ˆï¼ŒLLM ç”Ÿæˆä¸€ä¸ªåŸºäºäº‹å®çš„èŠå¤©ç­”æ¡ˆã€‚

## RAG ä¸­çš„äº”ä¸ªå…³é”®é˜¶æ®µ
RAG ä¸­æœ‰äº”ä¸ªå…³é”®é˜¶æ®µï¼Œè¿™å°†æˆä¸ºæ‚¨æ„å»ºä»»ä½•å¤§å‹åº”ç”¨ç¨‹åºçš„ä¸€éƒ¨åˆ†ï¼š
* åŠ è½½ï¼šè¿™æ˜¯æŒ‡å°†æ•°æ®ä»å…¶æ‰€åœ¨ä½ç½®ï¼ˆæ— è®ºæ˜¯æ–‡æœ¬æ–‡ä»¶ã€PDFã€å…¶ä»–ç½‘ç«™ã€æ•°æ®åº“è¿˜æ˜¯ APIï¼‰è·å–åˆ°æ‚¨çš„ç®¡é“ä¸­ã€‚LlamaHubæä¾›æ•°ç™¾ç§è¿æ¥å™¨å¯ä¾›é€‰æ‹©ã€‚
* ç´¢å¼•ï¼šè¿™æ„å‘³ç€åˆ›å»ºä¸€ä¸ªå…è®¸æŸ¥è¯¢æ•°æ®çš„æ•°æ®ç»“æ„ã€‚å¯¹äºLLMsæ¥è¯´ï¼Œè¿™å‡ ä¹æ€»æ˜¯æ„å‘³ç€åˆ›å»ºå‘é‡åµŒå…¥ã€æ•°æ®å«ä¹‰çš„æ•°å­—è¡¨ç¤ºï¼Œä»¥åŠè®¸å¤šå…¶ä»–å…ƒæ•°æ®ç­–ç•¥ï¼Œä»¥ä¾¿è½»æ¾å‡†ç¡®åœ°æ‰¾åˆ°ä¸Šä¸‹æ–‡ç›¸å…³çš„æ•°æ®ã€‚
* å­˜å‚¨ï¼šä¸€æ—¦æ•°æ®è¢«ç´¢å¼•ï¼Œæ‚¨å‡ ä¹æ€»æ˜¯å¸Œæœ›å­˜å‚¨ç´¢å¼•ä»¥åŠå…¶ä»–å…ƒæ•°æ®ï¼Œä»¥é¿å…é‡æ–°ç´¢å¼•ã€‚
* æŸ¥è¯¢ï¼šå¯¹äºä»»ä½•ç»™å®šçš„ç´¢å¼•ç­–ç•¥ï¼Œæ‚¨å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼åˆ©ç”¨ LLM å’Œ LlamaIndex æ•°æ®ç»“æ„è¿›è¡ŒæŸ¥è¯¢ï¼ŒåŒ…æ‹¬å­æŸ¥è¯¢ã€å¤šæ­¥æŸ¥è¯¢å’Œæ··åˆç­–ç•¥ã€‚
* è¯„ä¼°ï¼šä»»ä½•ç®¡é“ä¸­çš„å…³é”®æ­¥éª¤æ˜¯æ£€æŸ¥å®ƒç›¸å¯¹äºå…¶ä»–ç­–ç•¥çš„æœ‰æ•ˆæ€§ï¼Œæˆ–è€…ä½•æ—¶è¿›è¡Œæ›´æ”¹ã€‚è¯„ä¼°æä¾›å®¢è§‚è¡¡é‡æ‚¨å¯¹æŸ¥è¯¢çš„ç­”å¤çš„å‡†ç¡®æ€§ã€å¿ å®åº¦å’Œé€Ÿåº¦çš„ç¨‹åº¦ã€‚
![image](https://github.com/txjlrk/LlamaIndex-Study/assets/8086669/a335f526-1d54-4865-9554-48090a044be1)

## æ„å»ºç”Ÿäº§çº§ RAG çš„é€šç”¨æŠ€æœ¯
* è§£è€¦ç”¨äºæ£€ç´¢çš„å—ä¸ç”¨äºåˆæˆçš„å—
* è¾ƒå¤§æ–‡æ¡£é›†çš„ç»“æ„åŒ–æ£€ç´¢
* æ ¹æ®æ‚¨çš„ä»»åŠ¡åŠ¨æ€æ£€ç´¢å—
* ä¼˜åŒ–ä¸Šä¸‹æ–‡åµŒå…¥

### é€šç”¨æŠ€æœ¯1ï¼šè§£è€¦ç”¨äºæ£€ç´¢çš„å—ä¸ç”¨äºåˆæˆçš„å—
å°†ç”¨äºæ£€ç´¢çš„å—ä¸ç”¨äºåˆæˆçš„å—åˆ†ç¦»ã€‚
![image](https://github.com/txjlrk/LlamaIndex-Study/assets/8086669/ce489174-d779-4a7a-93dc-4c294da87a61)
#### ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆæï¼Ÿ 
ç”¨äºæ£€ç´¢çš„æœ€ä½³å—è¡¨ç¤ºå¯èƒ½ä¸ç”¨äºåˆæˆçš„æœ€ä½³è€ƒè™‘ä¸åŒã€‚ä¾‹å¦‚ï¼ŒåŸå§‹æ–‡æœ¬å—å¯èƒ½åŒ…å«LLMsæ‰€éœ€çš„è¯¦ç»†ä¿¡æ¯ï¼Œä»¥æ ¹æ®æŸ¥è¯¢åˆæˆæ›´è¯¦ç»†çš„ç­”æ¡ˆã€‚ç„¶è€Œï¼Œå®ƒå¯èƒ½åŒ…å«å¯èƒ½ä½¿åµŒå…¥è¡¨ç¤ºäº§ç”Ÿåå·®çš„å¡«å……è¯/ä¿¡æ¯ï¼Œæˆ–è€…å®ƒå¯èƒ½ç¼ºä¹å…¨å±€ä¸Šä¸‹æ–‡ï¼Œå¹¶ä¸”å½“ç›¸å…³æŸ¥è¯¢å‡ºç°æ—¶æ ¹æœ¬ä¸ä¼šè¢«æ£€ç´¢ã€‚
#### å…³é”®æŠ€æœ¯
1. åµŒå…¥æ–‡æ¡£æ‘˜è¦ï¼Œè¯¥æ‘˜è¦é“¾æ¥åˆ°ä¸æ–‡æ¡£å…³è”çš„å—ã€‚
è¿™å¯ä»¥å¸®åŠ©åœ¨æ£€ç´¢å—ä¹‹å‰æ£€ç´¢é«˜çº§ç›¸å…³æ–‡æ¡£ï¼Œè€Œä¸æ˜¯ç›´æ¥æ£€ç´¢å—ï¼ˆå¯èƒ½åœ¨ä¸ç›¸å…³çš„æ–‡æ¡£ä¸­ï¼‰ã€‚
2. åµŒå…¥ä¸€ä¸ªå¥å­ï¼Œç„¶åé“¾æ¥åˆ°è¯¥å¥å­å‘¨å›´çš„çª—å£ã€‚
è¿™å…è®¸æ›´ç»†ç²’åº¦åœ°æ£€ç´¢ç›¸å…³ä¸Šä¸‹æ–‡ï¼ˆåµŒå…¥å·¨å¤§çš„å—ä¼šå¯¼è‡´â€œä¸­é—´ä¸¢å¤±â€é—®é¢˜ï¼‰ï¼Œä½†ä¹Ÿç¡®ä¿äº† LLM åˆæˆæœ‰è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ã€‚

### é€šç”¨æŠ€æœ¯2ï¼šè¾ƒå¤§æ–‡æ¡£é›†çš„ç»“æ„åŒ–æ£€ç´¢
![image](https://github.com/txjlrk/LlamaIndex-Study/assets/8086669/6d420fab-fe70-4cc5-9e5c-4b9bf6e33ad5)
#### ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆæï¼Ÿ 
æ ‡å‡† RAG å †æ ˆï¼ˆtop-k æ£€ç´¢ + åŸºæœ¬æ–‡æœ¬åˆ†å‰²ï¼‰çš„ä¸€ä¸ªå¤§é—®é¢˜æ˜¯ï¼Œå®ƒéšç€æ–‡æ¡£æ•°é‡çš„å¢åŠ è€Œè¡¨ç°ä¸ä½³ - ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æœ‰ 100 ä¸ªä¸åŒçš„ PDFã€‚åœ¨æ­¤è®¾ç½®ä¸­ï¼Œç»™å®šä¸€ä¸ªæŸ¥è¯¢ï¼Œæ‚¨å¯èƒ½å¸Œæœ›ä½¿ç”¨ç»“æ„åŒ–ä¿¡æ¯æ¥å¸®åŠ©æ›´ç²¾ç¡®çš„æ£€ç´¢ï¼›ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æå‡ºä¸€ä¸ªä»…ä¸ä¸¤ä¸ª PDF ç›¸å…³çš„é—®é¢˜ï¼Œè¯·ä½¿ç”¨ç»“æ„åŒ–ä¿¡æ¯æ¥ç¡®ä¿è¿”å›çš„è¿™ä¸¤ä¸ª PDF è¶…å‡ºäº†ä¸å—çš„åŸå§‹åµŒå…¥ç›¸ä¼¼æ€§ã€‚
#### å…³é”®æŠ€æœ¯
æœ‰å‡ ç§æ–¹æ³•å¯ä»¥ä¸ºç”Ÿäº§è´¨é‡çš„ RAG ç³»ç»Ÿæ‰§è¡Œæ›´ç»“æ„åŒ–çš„æ ‡è®°/æ£€ç´¢ï¼Œæ¯ç§æ–¹æ³•éƒ½æœ‰è‡ªå·±çš„ä¼˜ç¼ºç‚¹ã€‚
1. å…ƒæ•°æ®è¿‡æ»¤å™¨+è‡ªåŠ¨æ£€ç´¢ ç”¨å…ƒæ•°æ®æ ‡è®°æ¯ä¸ªæ–‡æ¡£ï¼Œç„¶åå­˜å‚¨åœ¨çŸ¢é‡æ•°æ®åº“ä¸­ã€‚åœ¨æ¨ç†æœŸé—´ï¼Œä½¿ç”¨ LLM æ¨æ–­æ­£ç¡®çš„å…ƒæ•°æ®è¿‡æ»¤å™¨ï¼Œä»¥é™¤äº†è¯­ä¹‰æŸ¥è¯¢å­—ç¬¦ä¸²ä¹‹å¤–è¿˜æŸ¥è¯¢å‘é‡æ•°æ®åº“ã€‚
ä¼˜ç‚¹ âœ…ï¼šä¸»è¦çŸ¢é‡æ•°æ®åº“æ”¯æŒã€‚å¯ä»¥é€šè¿‡å¤šä¸ªç»´åº¦è¿‡æ»¤æ–‡æ¡£ã€‚
ç¼ºç‚¹ğŸš«ï¼šå¾ˆéš¾å®šä¹‰æ­£ç¡®çš„æ ‡ç­¾ã€‚æ ‡ç­¾å¯èƒ½æ²¡æœ‰åŒ…å«è¶³å¤Ÿçš„ç›¸å…³ä¿¡æ¯ä»¥è¿›è¡Œæ›´ç²¾ç¡®çš„æ£€ç´¢ã€‚æ­¤å¤–ï¼Œæ ‡ç­¾è¡¨ç¤ºæ–‡æ¡£çº§åˆ«çš„å…³é”®å­—æœç´¢ï¼Œä¸å…è®¸è¯­ä¹‰æŸ¥æ‰¾ã€‚
2. å­˜å‚¨æ–‡æ¡£å±‚æ¬¡ç»“æ„ï¼ˆæ‘˜è¦ -> åŸå§‹å—ï¼‰+é€’å½’æ£€ç´¢ åµŒå…¥æ–‡æ¡£æ‘˜è¦å¹¶æ˜ å°„åˆ°æ¯ä¸ªæ–‡æ¡£çš„å—ã€‚é¦–å…ˆåœ¨æ–‡æ¡£çº§åˆ«è·å–ï¼Œç„¶ååœ¨å—çº§åˆ«è·å–ã€‚
ä¼˜ç‚¹ âœ…ï¼šå…è®¸åœ¨æ–‡æ¡£çº§åˆ«è¿›è¡Œè¯­ä¹‰æŸ¥æ‰¾ã€‚
ç¼ºç‚¹ğŸš«ï¼šä¸å…è®¸é€šè¿‡ç»“æ„åŒ–æ ‡ç­¾è¿›è¡Œå…³é”®å­—æŸ¥æ‰¾ï¼ˆå¯ä»¥æ¯”è¯­ä¹‰æœç´¢æ›´ç²¾ç¡®ï¼‰ã€‚è‡ªåŠ¨ç”Ÿæˆæ‘˜è¦çš„æˆæœ¬ä¹Ÿå¯èƒ½å¾ˆé«˜ã€‚

### é€šç”¨æŠ€æœ¯3ï¼šæ ¹æ®æ‚¨çš„ä»»åŠ¡åŠ¨æ€æ£€ç´¢å—
![image](https://github.com/txjlrk/LlamaIndex-Study/assets/8086669/75e8da1a-2e42-430d-893d-92fc08f70943)
#### ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆæï¼Ÿ 
RAG ä¸ä»…ä»…æ˜¯é’ˆå¯¹ç‰¹å®šäº‹å®è¿›è¡Œé—®ç­”ï¼Œè¿˜é’ˆå¯¹å…¶ä¸­çš„ top-k ç›¸ä¼¼åº¦è¿›è¡Œäº†ä¼˜åŒ–ã€‚ç”¨æˆ·å¯èƒ½ä¼šæå‡ºå„ç§å„æ ·çš„é—®é¢˜ã€‚ç”±å¹¼ç¨šçš„ RAG å †æ ˆå¤„ç†çš„æŸ¥è¯¢åŒ…æ‹¬è¯¢é—®å…·ä½“äº‹å®çš„æŸ¥è¯¢ï¼Œä¾‹å¦‚â€œå‘Šè¯‰æˆ‘è¿™å®¶å…¬å¸ 2023 å¹´çš„ D&I è®¡åˆ’â€æˆ–â€œå™è¿°è€…åœ¨ Google æœŸé—´åšäº†ä»€ä¹ˆâ€ã€‚ä½†æŸ¥è¯¢è¿˜å¯ä»¥åŒ…æ‹¬æ‘˜è¦ï¼Œä¾‹å¦‚â€œæ‚¨èƒ½ç»™æˆ‘ä¸€ä»½è¯¥æ–‡æ¡£çš„é«˜çº§æ¦‚è¿°å—â€ï¼Œæˆ–æ¯”è¾ƒâ€œæ‚¨å¯ä»¥æ¯”è¾ƒ/å¯¹æ¯” X å’Œ Yâ€å—ï¼Ÿæ‰€æœ‰è¿™äº›ç”¨ä¾‹å¯èƒ½éœ€è¦ä¸åŒçš„æ£€ç´¢æŠ€æœ¯ã€‚
#### å…³é”®æŠ€æœ¯
LlamaIndex æä¾›äº†ä¸€äº›æ ¸å¿ƒæŠ½è±¡æ¥å¸®åŠ©æ‚¨è¿›è¡Œç‰¹å®šäºä»»åŠ¡çš„æ£€ç´¢ã€‚è¿™åŒ…æ‹¬æˆ‘ä»¬çš„è·¯ç”±å™¨æ¨¡å—ä»¥åŠæ•°æ®ä»£ç†æ¨¡å—ã€‚è¿™è¿˜åŒ…æ‹¬ä¸€äº›é«˜çº§æŸ¥è¯¢å¼•æ“æ¨¡å—ã€‚è¿™è¿˜åŒ…æ‹¬è¿æ¥ç»“æ„åŒ–å’Œéç»“æ„åŒ–æ•°æ®çš„å…¶ä»–æ¨¡å—ã€‚
æ‚¨å¯ä»¥ä½¿ç”¨è¿™äº›æ¨¡å—è¿›è¡Œè”åˆé—®ç­”å’Œæ‘˜è¦ï¼Œç”šè‡³å°†ç»“æ„åŒ–æŸ¥è¯¢ä¸éç»“æ„åŒ–æŸ¥è¯¢ç»“åˆèµ·æ¥ã€‚
#### æ ¸å¿ƒæ¨¡å—èµ„æº
* æŸ¥è¯¢å¼•æ“
* ä»£ç†å•†
* è·¯ç”±å™¨
#### è¯¦ç»†æŒ‡å—èµ„æº
* å­é—®é¢˜æŸ¥è¯¢å¼•æ“
* è”åˆ QA æ‘˜è¦æŸ¥è¯¢å¼•æ“
* é€’å½’æ£€ç´¢å™¨+æ–‡æ¡£ä»£ç†
* è·¯ç”±å™¨æŸ¥è¯¢å¼•æ“
* OpenAI Agent + æŸ¥è¯¢å¼•æ“å®éªŒæ‰‹å†Œ
* OpenAI ä»£ç†æŸ¥è¯¢è§„åˆ’

### é€šç”¨æŠ€æœ¯4ï¼šä¼˜åŒ–ä¸Šä¸‹æ–‡åµŒå…¥
#### ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆæï¼Ÿ 
è¿™ä¸ä¸Šé¢â€œè§£è€¦ç”¨äºæ£€ç´¢ä¸åˆæˆçš„å—â€ä¸­æè¿°çš„åŠ¨æœºæœ‰å…³ã€‚æˆ‘ä»¬å¸Œæœ›ç¡®ä¿åµŒå…¥ç»è¿‡ä¼˜åŒ–ï¼Œä»¥ä¾¿æ›´å¥½åœ°æ£€ç´¢æ‚¨çš„ç‰¹å®šæ•°æ®é›†ã€‚é¢„å…ˆè®­ç»ƒçš„æ¨¡å‹å¯èƒ½æ— æ³•æ•è·ä¸æ‚¨çš„ç”¨ä¾‹ç›¸å…³çš„æ•°æ®çš„æ˜¾ç€å±æ€§ã€‚
#### å…³é”®æŠ€æœ¯
é™¤äº†ä¸Šé¢åˆ—å‡ºçš„ä¸€äº›æŠ€æœ¯ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å°è¯•å¾®è°ƒåµŒå…¥æ¨¡å‹ã€‚å®é™…ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ— æ ‡ç­¾çš„æ–¹å¼åœ¨éç»“æ„åŒ–æ–‡æœ¬è¯­æ–™åº“ä¸Šåšåˆ°è¿™ä¸€ç‚¹ã€‚

## Usage Example
### Sub Question Query Engine
ä½¿ç”¨å­é—®é¢˜æŸ¥è¯¢å¼•æ“æ¥è§£å†³ä½¿ç”¨å¤šä¸ªæ•°æ®æºå›ç­”å¤æ‚æŸ¥è¯¢çš„é—®é¢˜ã€‚
å®ƒé¦–å…ˆå°†å¤æ‚çš„æŸ¥è¯¢åˆ†è§£ä¸ºæ¯ä¸ªç›¸å…³æ•°æ®æºçš„å­é—®é¢˜ï¼Œç„¶åæ”¶é›†æ‰€æœ‰ä¸­é—´å“åº”å¹¶åˆæˆæœ€ç»ˆå“åº”ã€‚
```
# load data
pg_essay = SimpleDirectoryReader(input_dir="./data/paul_graham/").load_data()

# build index and query engine
vector_query_engine = VectorStoreIndex.from_documents(
    pg_essay,
    use_async=True,
).as_query_engine()

# setup base query engine as tool
query_engine_tools = [
    QueryEngineTool(
        query_engine=vector_query_engine,
        metadata=ToolMetadata(
            name="pg_essay",
            description="Paul Graham essay on What I Worked On",
        ),
    ),
]

query_engine = SubQuestionQueryEngine.from_defaults(
    query_engine_tools=query_engine_tools,
    use_async=True,
)

response = query_engine.query(
    "How was Paul Grahams life different before, during, and after YC?"
)

print(response)

### è¿è¡Œåä¼šç”Ÿæˆ3ä¸ªé—®é¢˜
Generated 3 sub questions.
[pg_essay] Q: What did Paul Graham work on before YC?
[pg_essay] Q: What did Paul Graham work on during YC?
[pg_essay] Q: What did Paul Graham work on after YC?
[pg_essay] A: After YC, Paul Graham worked on starting his own investment firm with Jessica.
[pg_essay] A: During his time at YC, Paul Graham worked on various projects. He wrote all of YC's internal software in Arc and also worked on Hacker News (HN), which was a news aggregator initially meant for startup founders but later changed to engage intellectual curiosity. Additionally, he wrote essays and worked on helping the startups in the YC program with their problems.
[pg_essay] A: Paul Graham worked on writing essays and working on YC before YC.
```
